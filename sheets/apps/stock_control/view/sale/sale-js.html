
<script>

    $(function() {
        google.script.run.withSuccessHandler(renderSalePage).saleHtmlBuilded(productId, productName);
    });

    function renderSalePage(html) {

        var salePage = $('#sale');
        salePage.html(html);

        $(document).ready(function () {
            $('#dtBasicExample').DataTable();
            $('.dataTables_length').addClass('bs-select');
        });
        document.getElementById("save").addEventListener("click", save);
    }

    function getDataForm(){

        let productId = $("#productId").val();
        let name = $("#price").val();
        let qtd = $("#qtd").val();

        return {
            "productId": productId,
            "name": name,
            "qtd": qtd
        }
    }

    function save(){

        cleanMessageBox()

        let data = getDataForm();
        alert(JSON.stringify(data));

        google.script.run.withSuccessHandler(renderMessageResponse("primary", "message")).saveOrUpdateProduct(data);

    }

</script>


