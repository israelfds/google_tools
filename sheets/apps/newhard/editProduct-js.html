
<script>


    function renderEditProduct(html) {

       var editProduct = $('#editProduct');
	   editProduct.html(html);
       document.getElementById("editar").addEventListener("click", edit);
    }


    function getFormData($form){
         var unindexed_array = $form.serializeArray();
         var indexed_array = {};

         $.map(unindexed_array, function(n, i){
             indexed_array[n['name']] = n['value'];
         });
         return indexed_array;
    }


    function getDataForm(){

        return     [$("#id").val(),
                    $("#name").val(),
                    $("#qtd").val(),
                    $("#ppuc").val(),
                    $("#ppuv").val(),
                    $("#description").val()];
    }


    function renderMessageResponse(typeAlert, message){

       let msg = `<div class="alert alert-${typeAlert}" role="alert">
                      ${message}
                  </div>`

       console.log('msg', msg);
       var message = $('#message-box');
	   message.html(msg);
    }

    function cleanMessageResponse(){
       var message = $('#message-box');
	   message.html("");
    }

     function edit(){

        cleanMessageResponse()

        let data = getDataForm();
        google.script.run.withSuccessHandler(renderMessageResponse("primary", "foi")).
                          withFailureHandler(renderMessageResponse("danger", "deu merda ai")).updateItem(data);

        //google.script.run.withFailureHandler(messageResponse).updateItem(data);
     }


    $(function() {
       console.log("chamando aqui -->");
       google.script.run.withSuccessHandler(renderEditProduct).editProductHtmlBuilded(productId);
    });

</script>


